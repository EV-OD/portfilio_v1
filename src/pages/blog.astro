---
import H1 from "../components/h1.astro";
import type { MarkdownHeading } from "astro";
import { getCollection } from "astro:content";
import InfoLayout from "../layouts/InfoLayout.astro";

const allArticles = await getCollection("articles");
---

<InfoLayout>
     <div class="pt-0 p-4 sm:py-8 sm:px-12 min-h-screen">
          <H1> Blog </H1>

          <ul class="mt-8 space-y-4">
               {
                   allArticles.map((article) => (
                       <li>
                           <a class="space-y-1" href={`/blog/${article.rendered?.metadata ? (article.rendered.metadata.headings as unknown as MarkdownHeading[])[0].slug : article.id}`} >
                               <h2 class="text-2xl xl:text-4xl text-zinc-200 text-balance font-medium">
                                   {article.data.title}
                               </h2>
                               <p class="text-xl text-zinc-400">{article.data.snippet}</p>
                               <p class="text-sm text-zinc-400">
                                   {(article.data.pubDate)} &middot;{" "}
                                   {article.data.author}
                               </p>
                           </a>
                       </li>
                   ))
               }
           </ul>
     </div>
</InfoLayout>